"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[445],{6445:function(t,a,e){e.r(a),e.d(a,{default:function(){return U}});var l=e(3396),n=e(7139);const s=t=>((0,l.dD)("data-v-41c9d3a4"),t=t(),(0,l.Cn)(),t),i={class:"vertical-center"},r={class:"container"},o={class:"col"},c={class:"item-container"},d=s((()=>(0,l._)("div",{style:{"font-weight":"bold","font-size":"x-large","margin-bottom":"50px","text-align":"center"}}," Wallet Details ",-1))),u={style:{"text-align":"left","margin-left":"80px"}},m=["title"],p=["title"],w=["title"],h=s((()=>(0,l._)("br",null,null,-1))),v={class:"col"},f={class:"item-container"};function b(t,a,e,s,b,g){const _=(0,l.up)("v-col"),k=(0,l.up)("v-row"),D=(0,l.up)("v-container"),W=(0,l.up)("v-btn"),y=(0,l.up)("v-divider"),I=(0,l.up)("AddTransaction");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",r,[(0,l._)("div",o,[(0,l._)("div",c,[d,(0,l._)("div",u,[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l._)("span",{title:t.walletDetails.name}," Name: "+(0,n.zw)(t.walletDetails.name),9,m)])),_:1})])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l._)("span",{title:t.walletDetails.balance}," Balance: "+(0,n.zw)(t.walletDetails.balance),9,p)])),_:1})])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l._)("span",{title:g.formatDate(t.walletDetails.createdAt)}," Wallet Created At: "+(0,n.zw)(g.formatDate(t.walletDetails.createdAt)),9,w)])),_:1})])),_:1})])),_:1})]),h,(0,l.Wm)(W,{variant:"text",color:"deep-purple-accent-4",onClick:g.getTransaction},{default:(0,l.w5)((()=>[(0,l.Uk)(" See All Transactions ")])),_:1},8,["onClick"])])]),(0,l.Wm)(y,{vertical:""}),(0,l._)("div",v,[(0,l._)("div",f,[(0,l.Wm)(I,{walletId:t.walletDetails.id},null,8,["walletId"])])])])])}e(7658);var g=e(9242);const _={class:"hello",style:{width:"100%"}},k={style:{"margin-top":"20px"}},D={class:"text-subtitle-1 pb-2"};function W(t,a,e,s,i,r){const o=(0,l.up)("v-text-field"),c=(0,l.up)("v-switch"),d=(0,l.up)("v-sheet"),u=(0,l.up)("v-container"),m=(0,l.up)("v-divider"),p=(0,l.up)("v-spacer"),w=(0,l.up)("v-btn"),h=(0,l.up)("v-card-actions"),v=(0,l.up)("v-card"),f=(0,l.up)("v-form"),b=(0,l.up)("v-snackbar");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",_,[(0,l.Wm)(f,{"fast-fail":"",ref:"transactionForm",onSubmit:a[3]||(a[3]=(0,g.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"mx-auto","max-width":"400",title:"Make a transaction"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"mx-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{modelValue:t.amount,"onUpdate:modelValue":a[0]||(a[0]=a=>t.amount=a),label:"Amount",rules:t.amoutRules,variant:"underlined"},null,8,["modelValue","rules"]),(0,l.Wm)(o,{modelValue:t.description,"onUpdate:modelValue":a[1]||(a[1]=a=>t.description=a),label:"Description for transaction",variant:"underlined"},null,8,["modelValue"]),(0,l.Wm)(c,{modelValue:t.type,"onUpdate:modelValue":a[2]||(a[2]=a=>t.type=a),"hide-details":"","true-value":"CREDIT","false-value":"DEBIT",label:`Transaction Type: ${t.type}`},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,l.Wm)(m),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p),(0,l.Wm)(w,{type:"submit",class:"flex-grow-1",height:"48",variant:"tonal",onClick:(0,g.iM)(r.addTransaction,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Uk)(" New Transaction ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},512)]),(0,l._)("div",k,[(0,l.Wm)(b,{timeout:2e3,color:t.snackbarcolor,variant:"tonal",modelValue:t.snackbar,"onUpdate:modelValue":a[5]||(a[5]=a=>t.snackbar=a),vertical:""},{actions:(0,l.w5)((()=>[(0,l.Wm)(w,{color:t.snackbarcolor,variant:"text",onClick:a[4]||(a[4]=a=>t.snackbar=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" Close ")])),_:1},8,["color"])])),default:(0,l.w5)((()=>[(0,l._)("div",D,(0,n.zw)(t.snackbartitle),1),(0,l._)("p",null,(0,n.zw)(t.snackbarmessage),1)])),_:1},8,["color","modelValue"])])],64)}var y=e(5478),I={name:"AddTransaction",props:{walletId:String},data:()=>({snackbar:!1,snackbartitle:"",snackbarcolor:"success",snackbarmessage:"",description:"",amount:null,amoutRules:[t=>/^\d+(\.\d+)?$/.test(t)||"Amount balance can only contain digit and dot",t=>t&&t.toString().split(".").length<2||t&&t.toString().split(".")[1].length<=4||"No more than 4 digits after the decimal point"],type:"CREDIT"}),methods:{async addTransaction(){let t=this.$loading.show({container:null,loader:"dots"});if(!this.amount||isNaN(this.amount))return alert("Please proivde a wallet name");let a={amount:this.amount,type:this.type,description:this.description};setTimeout((()=>y.Z.createtransaction(this.walletId,a).then((a=>{this.snackbartitle="Transaction is succesfull.",this.snackbarmessage=`Updated wallet balance is ${a.data.balance}.`,this.snackbarcolor="success",this.snackbar=!0;const e=JSON.parse(window.localStorage.getItem("walletData"));e.balance=a.data.balance,localStorage.setItem("walletData",JSON.stringify(e)),this.$refs.transactionForm.reset(),t.hide()})).catch((a=>{let e=a;if(a.request&&a.request.response)try{let t=JSON.parse(a.request.response);e=t.error}catch(l){e=a.request.response}this.snackbartitle="Error Occured",this.snackbarmessage=e,this.snackbarcolor="red",this.snackbar=!0,t.hide()}))),2e3)}}},T=e(89);const x=(0,T.Z)(I,[["render",W],["__scopeId","data-v-7e5c3234"]]);var C=x,S=e(6797),V=e.n(S),N={name:"walletView",components:{AddTransaction:C},data:()=>({walletDetails:{},lastChange:null,timer:null}),methods:{async fetchData(){let t=this.$route.params.id;y.Z.get(t).then((t=>{this.walletDetails=t.data})).catch((t=>{console.log(t)})).finally((()=>console.log("Call Done")))},formatDate(t){return V()(t).format("MMMM Do YYYY, h:mm:ss a")},getTransaction(t){t.preventDefault(),this.$router.push({name:"transactions",query:{walletId:this.$route.params.id,skip:0,limit:10}})}},created(){let t=window.localStorage.getItem("walletData");t?(this.walletDetails=JSON.parse(t),this.timer=setInterval((()=>{const a=window.localStorage.getItem("walletData");a!==t&&(t=a,this.walletDetails=JSON.parse(a))}),1e3)):this.fetchData()},beforeUnmount(){this.timer&&clearInterval(this.timer)}};const A=(0,T.Z)(N,[["render",b],["__scopeId","data-v-41c9d3a4"]]);var U=A}}]);
//# sourceMappingURL=445.dfef7432.js.map